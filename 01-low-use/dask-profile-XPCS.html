



<!DOCTYPE html>
<html lang="en">
  
  <head>
    
      <meta charset="utf-8">
      <title>Dask Profile</title>
      
      
        
          
        
        
          
        <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-2.1.1.min.js" integrity="sha384-kLr4fYcqcSpbuI95brIH3vnnYCquzzSxHPU6XGQCIkQRGJwhg0StNbj1eegrHs12" crossorigin="anonymous"></script>
        <script type="text/javascript">
            Bokeh.set_log_level("info");
        </script>
        
      
      
    
  </head>
  
  
  <body>
    
      
        
          
          
            
              <div class="bk-root" id="a6d4ba44-c7bd-4055-adb1-6a0e1764b925" data-root-id="1290"></div>
            
          
        
      
      
        <script type="application/json" id="1432">
          {"28976250-a032-486a-8745-93c14767610b":{"roots":{"references":[{"attributes":{},"id":"1328","type":"BasicTickFormatter"},{"attributes":{},"id":"1297","type":"LinearScale"},{"attributes":{"source":{"id":"1289"}},"id":"1321","type":"CDSView"},{"attributes":{"overlay":{"id":"1311"}},"id":"1308","type":"BoxZoomTool"},{"attributes":{"formatter":{"id":"1326"},"ticker":{"id":"1304"},"visible":false},"id":"1303","type":"LinearAxis"},{"attributes":{},"id":"1300","type":"BasicTicker"},{"attributes":{"bottom_units":"screen","fill_alpha":0.5,"fill_color":"lightgrey","left_units":"screen","level":"overlay","line_alpha":1.0,"line_color":"black","line_dash":[4,4],"line_width":2,"right_units":"screen","top_units":"screen"},"id":"1311","type":"BoxAnnotation"},{"attributes":{"data_source":{"id":"1289"},"glyph":{"id":"1318"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":null,"selection_glyph":null,"view":{"id":"1321"}},"id":"1320","type":"GlyphRenderer"},{"attributes":{"bottom":{"field":"bottom"},"fill_color":{"field":"color"},"left":{"field":"left"},"line_width":{"value":2},"right":{"field":"right"},"top":{"field":"top"}},"id":"1318","type":"Quad"},{"attributes":{},"id":"1332","type":"Selection"},{"attributes":{},"id":"1295","type":"LinearScale"},{"attributes":{"dimensions":"width"},"id":"1309","type":"WheelZoomTool"},{"attributes":{},"id":"1304","type":"BasicTicker"},{"attributes":{},"id":"1291","type":"DataRange1d"},{"attributes":{"formatter":{"id":"1328"},"ticker":{"id":"1300"},"visible":false},"id":"1299","type":"LinearAxis"},{"attributes":{},"id":"1326","type":"BasicTickFormatter"},{"attributes":{"data":{"bottom":[0,1,2,3,4,5,1,2,3,4,5,6,7,8,9,10,9,9,10,11,10,11,12,12,13,14,15,16,17,14,15,16,13,14,15,16,12,13,14,15,1,2,3,4,1],"color":["#64CB5D","#FDE724","#D7E219","#D7E219","#355D8C","#355D8C","#3C4D8A","#1E978A","#1E978A","#355D8C","#D7E219","#472A79","#433C84","#3C4D8A","#472A79","#D7E219","#3C4D8A","#433C84","#472A79","#D7E219","#FDE724","#FDE724","#355D8C","#FDE724","#FDE724","#FDE724","#472A79","#471669","#472A79","#472A79","#471669","#472A79","#472A79","#471669","#472A79","#471669","#472A79","#471669","#472A79","#471669","#FDE724","#FDE724","#FDE724","#FDE724","#FDE724"],"filename":["","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/dask/array/core.py","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/extra_data/file_access.py","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/extra_data/file_access.py","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/h5py/_hl/files.py","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/h5py/_hl/files.py","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/dask/optimization.py","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/dask/core.py","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/dask/core.py","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/dask/utils.py","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/dask/array/routines.py","&lt;__array_function__ internals&gt;","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/numpy/lib/shape_base.py","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/midtools/correlations.py","&lt;__array_function__ internals&gt;","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/numpy/core/fromnumeric.py","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/midtools/correlations.py","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/Xana/XpcsAna/pyxpcs3.py","&lt;__array_function__ internals&gt;","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/numpy/core/fromnumeric.py","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/Xana/XpcsAna/mp_corr3_err.py","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/Xana/XpcsAna/mp_corr3_err.py","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/numpy/core/_methods.py","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/Xana/XpcsAna/mp_corr3_err.py","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/Xana/XpcsAna/mp_corr3_err.py","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/Xana/XpcsAna/mp_corr3_err.py","&lt;__array_function__ internals&gt;","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/numpy/core/numeric.py","&lt;__array_function__ internals&gt;","&lt;__array_function__ internals&gt;","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/numpy/core/numeric.py","&lt;__array_function__ internals&gt;","&lt;__array_function__ internals&gt;","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/numpy/core/numeric.py","&lt;__array_function__ internals&gt;","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/numpy/core/numeric.py","&lt;__array_function__ internals&gt;","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/numpy/core/numeric.py","&lt;__array_function__ internals&gt;","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/numpy/core/numeric.py","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/dask/array/core.py","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/dask/array/core.py","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/dask/array/core.py","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/dask/array/core.py","/gpfs/exfel/data/scratch/roscar/work/midtools/midtools/.venv/lib64/python3.6/site-packages/dask/array/core.py"],"left":[0,0,0,0.0,0.0,0.0,0.00135393437400446,0.00135393437400446,0.00135393437400446,0.00135393437400446,0.00135393437400446,0.00135393437400446,0.00135393437400446,0.00135393437400446,0.00135393437400446,0.00135393437400446,0.008123606244026757,0.01003504300732717,0.01003504300732717,0.01003504300732717,0.01975151322077094,0.01975151322077094,0.01975151322077094,0.019831156419241793,0.019831156419241793,0.019831156419241793,0.019831156419241793,0.019831156419241793,0.019831156419241793,0.04372411596049696,0.04372411596049696,0.04372411596049696,0.10074864606562597,0.10074864606562597,0.10074864606562597,0.10074864606562597,0.22706275884039495,0.22706275884039495,0.22706275884039495,0.22706275884039495,0.5872093023255813,0.5872093023255813,0.5872093023255813,0.5872093023255813,0.5872889455240522],"line":["","c = a[b]\n","return self.file_acc.file[self.ds_path][item]\n","self._file = h5py.File(self.filename, 'r')\n","swmr=swmr)\n","fid = h5f.open(name, flags, fapl=fapl)\n","return core.get(self.dsk, self.outkey, dict(zip(self.inkeys, args)))\n","result = _execute_task(task, cache)\n","return func(*(_execute_task(a, cache) for a in args))\n","return func(*args, **kwargs)\n","return np.apply_along_axis(func1d, func1d_axis, arr, *func1d_args, **func1d_kwargs)\n","","res = asanyarray(func1d(inarr_view[ind0], *args, **kwargs))\n","wnan = np.isnan(np.sum(data, axis=0))\n","","initial=initial, where=where)\n","rois = [np.where((qmap_2d&gt;qi) &amp; (qmap_2d&lt;qf) &amp; xpcs_mask) for qi,qf in\n","lin_mask = np.where(mask)\n","","**kwargs)\n","datregt.append(np.zeros((lind[iq],chn), dtype=np.float32))\n","sst[reg][cindex] = matrx[cindex].mean()\n","ret = umr_sum(arr, axis, dtype, out, keepdims)\n","(matrx[cindex][:,None], datreg[reg][cindex][:,:chn-1]), axis=1)\n","(matrx[cindex][:,None], datreg[reg][cindex][:,:chn-1]), axis=1)\n","(matrx[cindex][:,None], datreg[reg][cindex][:,:chn-1]), axis=1)\n","","return roll(a.ravel(), shift, 0).reshape(a.shape)\n","","","return roll(a.ravel(), shift, 0).reshape(a.shape)\n","","","return roll(a.ravel(), shift, 0).reshape(a.shape)\n","","result[res_index] = a[arr_index]\n","","return roll(a.ravel(), shift, 0).reshape(a.shape)\n","","return result\n","result[idx] = arr\n","for starts, shapes in zip(cumdims, chunks)\n","for starts, shapes in zip(cumdims, chunks)\n","[slice(s, s + dim) for s, dim in zip(starts, shapes)]\n","return concatenate3(transposelist(arrays, axes, extradims=extradims))\n"],"line_number":[0,98,332,148,408,173,1022,151,121,31,342,6,379,76,6,2242,79,315,6,3622,160,40,160,141,141,141,6,1186,6,6,1186,6,6,1186,6,1209,6,1186,6,1211,4424,182,182,181,4435],"name":["","getter","__getitem__","file","__init__","make_fid","__call__","get","_execute_task","apply","_inner_apply_along_axis","apply_along_axis","apply_along_axis","calculate_correlation","sum","sum","&lt;listcomp&gt;","pyxpcs","var","var","mp_corr","correlator","_mean","correlator2","correlator2","correlator2","roll","roll","roll","roll","roll","roll","roll","roll","roll","roll","roll","roll","roll","roll","concatenate3","slices_from_chunks","&lt;listcomp&gt;","&lt;listcomp&gt;","concatenate_axes"],"percentage":["100.0%","0.1%","0.1%","0.0%","0.0%","0.0%","58.6%","58.6%","58.6%","55.7%","55.7%","55.7%","55.7%","55.7%","0.7%","0.7%","0.2%","51.0%","1.0%","1.0%","49.6%","47.9%","0.0%","20.7%","8.1%","2.4%","0.0%","0.0%","0.0%","0.1%","0.1%","0.1%","0.1%","0.1%","0.1%","0.0%","0.2%","0.2%","0.2%","0.0%","0.0%","0.0%","0.0%","0.0%","1.6%"],"right":[1,0.00135393437400446,0.00135393437400446,0.00023892959541255176,0.00023892959541255176,0.00015928639694170118,0.5872093023255813,0.5872093023255813,0.5872093023255813,0.5586173940745459,0.5586173940745459,0.5586173940745459,0.5584581076776042,0.5584581076776042,0.008123606244026757,0.008123606244026757,0.01003504300732717,0.5203886588085376,0.01975151322077094,0.01975151322077094,0.5152914941064032,0.49840713603058284,0.019831156419241793,0.22706275884039495,0.10074864606562597,0.04372411596049696,0.019910799617712645,0.019910799617712645,0.019910799617712645,0.04436126154826377,0.04436126154826377,0.04436126154826377,0.10170436444727618,0.10170436444727618,0.10170436444727618,0.10082828926409683,0.2290538388021662,0.2290538388021662,0.2290538388021662,0.2271424020388658,0.5872889455240522,0.5872889455240522,0.5872889455240522,0.5872889455240522,0.6037750876075183],"time":["125.56 s","170.00 ms","170.00 ms","30.00 ms","30.00 ms","20.00 ms","73.56 s","73.56 s","73.56 s","69.97 s","69.97 s","69.97 s","69.95 s","69.95 s","850.00 ms","850.00 ms","240.00 ms","64.08 s","1.22 s","1.22 s","62.22 s","60.10 s","10.00 ms","26.02 s","10.16 s","3.00 s","10.00 ms","10.00 ms","10.00 ms","80.00 ms","80.00 ms","80.00 ms","120.00 ms","120.00 ms","120.00 ms","10.00 ms","250.00 ms","250.00 ms","250.00 ms","10.00 ms","10.00 ms","10.00 ms","10.00 ms","10.00 ms","2.07 s"],"top":[1,2,3,4,5,6,2,3,4,5,6,7,8,9,10,11,10,10,11,12,11,12,13,13,14,15,16,17,18,15,16,17,14,15,16,17,13,14,15,16,2,3,4,5,2],"width":[1,0.00135393437400446,0.00135393437400446,0.00023892959541255176,0.00023892959541255176,0.00015928639694170118,0.5858553679515769,0.5858553679515769,0.5858553679515769,0.5572634597005415,0.5572634597005415,0.5572634597005415,0.5571041733035997,0.5571041733035997,0.006769671870022297,0.006769671870022297,0.0019114367633004132,0.5103536158012104,0.009716470213443771,0.009716470213443771,0.4955399808856322,0.4786556228098119,7.964319847085163e-05,0.20723160242115315,0.08091748964638418,0.023892959541255167,7.964319847085163e-05,7.964319847085163e-05,7.964319847085163e-05,0.0006371455877668061,0.0006371455877668061,0.0006371455877668061,0.0009557183816502057,0.0009557183816502057,0.0009557183816502057,7.96431984708551e-05,0.0019910799617712527,0.0019910799617712527,0.0019910799617712527,7.964319847084123e-05,7.964319847086898e-05,7.964319847086898e-05,7.964319847086898e-05,7.964319847086898e-05,0.016486142083466104]},"selected":{"id":"1332"},"selection_policy":{"id":"1331"}},"id":"1289","type":"ColumnDataSource"},{"attributes":{"callback":null,"point_policy":"follow_mouse","tooltips":"\n            &lt;div&gt;\n                &lt;span style=\"font-size: 14px; font-weight: bold;\"&gt;Name:&lt;/span&gt;&amp;nbsp;\n                &lt;span style=\"font-size: 10px; font-family: Monaco, monospace;\"&gt;@name&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;div&gt;\n                &lt;span style=\"font-size: 14px; font-weight: bold;\"&gt;Filename:&lt;/span&gt;&amp;nbsp;\n                &lt;span style=\"font-size: 10px; font-family: Monaco, monospace;\"&gt;@filename&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;div&gt;\n                &lt;span style=\"font-size: 14px; font-weight: bold;\"&gt;Line number:&lt;/span&gt;&amp;nbsp;\n                &lt;span style=\"font-size: 10px; font-family: Monaco, monospace;\"&gt;@line_number&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;div&gt;\n                &lt;span style=\"font-size: 14px; font-weight: bold;\"&gt;Line:&lt;/span&gt;&amp;nbsp;\n                &lt;span style=\"font-size: 10px; font-family: Monaco, monospace;\"&gt;@line&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;div&gt;\n                &lt;span style=\"font-size: 14px; font-weight: bold;\"&gt;Time:&lt;/span&gt;&amp;nbsp;\n                &lt;span style=\"font-size: 10px; font-family: Monaco, monospace;\"&gt;@time&lt;/span&gt;\n            &lt;/div&gt;\n            &lt;div&gt;\n                &lt;span style=\"font-size: 14px; font-weight: bold;\"&gt;Percentage:&lt;/span&gt;&amp;nbsp;\n                &lt;span style=\"font-size: 10px; font-family: Monaco, monospace;\"&gt;@percentage&lt;/span&gt;\n            &lt;/div&gt;\n            "},"id":"1322","type":"HoverTool"},{"attributes":{"callback":null},"id":"1307","type":"TapTool"},{"attributes":{"below":[{"id":"1299"}],"center":[{"id":"1302"},{"id":"1306"}],"left":[{"id":"1303"}],"renderers":[{"id":"1320"}],"sizing_mode":"stretch_both","title":{"id":"1325"},"toolbar":{"id":"1312"},"x_range":{"id":"1291"},"x_scale":{"id":"1295"},"y_range":{"id":"1293"},"y_scale":{"id":"1297"}},"id":"1290","subtype":"Figure","type":"Plot"},{"attributes":{},"id":"1331","type":"UnionRenderers"},{"attributes":{"axis":{"id":"1299"},"ticker":null,"visible":false},"id":"1302","type":"Grid"},{"attributes":{"text":""},"id":"1325","type":"Title"},{"attributes":{"active_drag":"auto","active_inspect":"auto","active_multi":null,"active_scroll":"auto","active_tap":"auto","tools":[{"id":"1307"},{"id":"1308"},{"id":"1309"},{"id":"1310"},{"id":"1322"}]},"id":"1312","type":"Toolbar"},{"attributes":{},"id":"1310","type":"ResetTool"},{"attributes":{},"id":"1293","type":"DataRange1d"},{"attributes":{"axis":{"id":"1303"},"dimension":1,"ticker":null,"visible":false},"id":"1306","type":"Grid"}],"root_ids":["1290"]},"title":"Bokeh Application","version":"2.1.1"}}
        </script>
        <script type="text/javascript">
          (function() {
            var fn = function() {
              Bokeh.safely(function() {
                (function(root) {
                  function embed_document(root) {
                    
                  var docs_json = document.getElementById('1432').textContent;
                  var render_items = [{"docid":"28976250-a032-486a-8745-93c14767610b","root_ids":["1290"],"roots":{"1290":"a6d4ba44-c7bd-4055-adb1-6a0e1764b925"}}];
                  root.Bokeh.embed.embed_items(docs_json, render_items);
                
                  }
                  if (root.Bokeh !== undefined) {
                    embed_document(root);
                  } else {
                    var attempts = 0;
                    var timer = setInterval(function(root) {
                      if (root.Bokeh !== undefined) {
                        clearInterval(timer);
                        embed_document(root);
                      } else {
                        attempts++;
                        if (attempts > 100) {
                          clearInterval(timer);
                          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
                        }
                      }
                    }, 10, root)
                  }
                })(window);
              });
            };
            if (document.readyState != "loading") fn();
            else document.addEventListener("DOMContentLoaded", fn);
          })();
        </script>
    
  </body>
  
</html>